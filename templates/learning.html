{% extends "base.html" %}
{% block title %}Learning | {{ BRAND_NAME }}{% endblock %}

{% block head %}
  <style>
    .learning-section{margin-top:32px;}
    .learning-section .banner small{display:block;margin-bottom:6px;text-transform:uppercase;font-weight:700;letter-spacing:.24em;color:rgba(255,255,255,.6);font-size:11px;}
    .learning-section .banner h2{margin:0;font-size:clamp(24px,3.6vw,34px);line-height:1.2}
    .learning-section .banner p{margin:8px 0 0;max-width:640px}
    .learning-card{display:flex;flex-direction:column;gap:18px}
    .learning-card .metric-row{display:flex;flex-wrap:wrap;gap:12px;margin:10px 0 4px}
    .learning-card .metric{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:12px 16px;min-width:120px}
    .learning-card .metric strong{display:block;font-size:20px;font-weight:800;color:#fff}
    .learning-card .metric span{display:block;color:var(--muted);font-size:13px;margin-top:4px}
    .learning-card .cta-row{display:flex;flex-wrap:wrap;gap:12px;margin-top:8px}
    .learning-card ul{margin:12px 0 0;padding-left:20px;color:var(--muted)}
    .learning-card ul li{margin:4px 0}
    .learning-card .empty-state{color:var(--muted);margin:0}
    .bootcamp-highlights{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:18px;margin-top:12px}
    .bootcamp-highlights .card{height:100%}
    .bootcamp-highlights h3{margin:0 0 8px;font-size:18px}
    .bootcamp-highlights ul{margin:0;padding-left:20px;color:var(--muted)}
    .bootcamp-highlights ul li{margin:4px 0}
    .bootcamp-meta{display:flex;flex-wrap:wrap;gap:12px;margin:10px 0 0}
    .bootcamp-meta .meta-pill{padding:10px 14px;border-radius:999px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);font-weight:700;font-size:13px;color:#fff}
    .bootcamp-meta .meta-pill strong{font-size:15px}
    @media (max-width: 900px){
      .bootcamp-highlights{grid-template-columns:1fr}
    }
  </style>
{% endblock %}

{% block body_class %}with-cover{% endblock %}

{% block hero %}
  {% set _cover = COURSE_COVER_URL %}
  {% if course and course.cover_url %}
    {% set _cover = course.cover_url %}
  {% elif bootcamp and bootcamp.cover_url %}
    {% set _cover = bootcamp.cover_url %}
  {% endif %}
  <section class="cover-hero" aria-labelledby="learning-title">
    <div class="bg" style="background-image:url('{{ _cover }}');"></div>
    <div class="overlay" aria-hidden="true"></div>
    <div class="inner">
      <p class="subhead">Programs & cohorts</p>
      <h1 id="learning-title">Learning with {{ BRAND_NAME }}</h1>
      <p class="subhead">Choose the experience that matches how your team needs to learn—deep one-on-one training or an intensive collaborative bootcamp.</p>
      <div class="cta-row">
        <a class="btn" href="#course">Explore the course</a>
        <a class="btn ghost" href="#bootcamp">See the bootcamp</a>
      </div>
    </div>
  </section>
{% endblock %}

{% block content %}
  <section id="course" class="section-card learning-section" aria-labelledby="course-section-title">
    <div class="banner">
      <small>Flagship course</small>
      <h2 id="course-section-title">One-on-one tailored training</h2>
      <p class="muted">Build live alongside our experts and leave with production-ready automations that fit your stack.</p>
    </div>
    <div class="body">
      <div class="card learning-card">
        {% if course %}
          <div>
            <h3 style="margin:0 0 6px;">{{ course.title }}</h3>
            <p class="muted" style="margin:0 0 12px;">{{ course.level }} · {{ course.category }}</p>
            <div class="metric-row" role="list">
              <div class="metric" role="listitem">
                <strong>{{ course_metrics.modules }}</strong>
                <span>Modules</span>
              </div>
              <div class="metric" role="listitem">
                <strong>{{ course_metrics.lessons }}</strong>
                <span>Sections</span>
              </div>
              <div class="metric" role="listitem">
                <strong>{{ course_metrics.weeks }}</strong>
                <span>Weeks of material</span>
              </div>
            </div>
            {% if course_week_preview %}
              <p class="muted" style="margin:16px 0 6px;">First modules at a glance:</p>
              <ul>
                {% for week in course_week_preview %}
                  <li>{{ week.title }}{% if week.lessons_count %} · {{ week.lessons_count }} lessons{% endif %}</li>
                {% endfor %}
              </ul>
              {% if course_has_more_weeks %}
                <p class="muted" style="margin:10px 0 0;">…and {{ course_total_weeks - (course_week_preview|length) }} more modules tailored to your team.</p>
              {% endif %}
            {% else %}
              <p class="empty-state">We are updating the curriculum overview—contact us for the latest syllabus.</p>
            {% endif %}
          </div>
          <div class="cta-row">
            <a class="btn" href="{{ self.course_href() }}">View course outline</a>
            <a class="btn ghost" href="{{ bp('/register/') }}">Register for updates</a>
          </div>
        {% else %}
          <p class="empty-state">Course details are being refreshed. Reach out and we will share the upcoming schedule.</p>
          <div class="cta-row">
            <a class="btn" href="{{ bp('/contact/') }}">Contact us</a>
            <a class="btn ghost" href="{{ bp('/register/') }}">Join the waitlist</a>
          </div>
        {% endif %}
      </div>
    </div>
  </section>

  <section id="bootcamp" class="section-card learning-section" aria-labelledby="bootcamp-section-title">
    <div class="banner">
      <small>Team cohort</small>
      <h2 id="bootcamp-section-title">AI Implementation Bootcamp</h2>
      <p class="muted">Two-day, high-intensity build sessions that move your whole team from idea to shipped product.</p>
    </div>
    <div class="body">
      {% if bootcamp %}
        <div class="card learning-card">
          <div>
            <h3 style="margin:0 0 6px;">{{ bootcamp.title }}</h3>
            <p class="muted" style="margin:0 0 12px;">{{ bootcamp.subtitle }}</p>
            <div class="bootcamp-meta">
              {% if bootcamp.seat_cap %}<div class="meta-pill"><strong>{{ bootcamp.seat_cap }}</strong> seats per cohort</div>{% endif %}
              {% if bootcamp.price_eur %}<div class="meta-pill"><strong>{{ bootcamp.price_eur }} {{ bootcamp.currency }}</strong> per learner</div>{% endif %}
            </div>
            <div class="bootcamp-highlights">
              {% if bootcamp_features_preview %}
                <div class="card">
                  <h3>What you get</h3>
                  <ul>
                    {% for feature in bootcamp_features_preview %}
                      <li>{{ feature }}</li>
                    {% endfor %}
                  </ul>
                </div>
              {% endif %}
              {% if bootcamp_daily_preview %}
                <div class="card">
                  <h3>Cohort flow</h3>
                  <ul>
                    {% for day in bootcamp_daily_preview %}
                      <li><strong>{{ day.title }}</strong>{% if day.description %} — {{ day.description }}{% endif %}</li>
                    {% endfor %}
                  </ul>
                </div>
              {% endif %}
            </div>
          </div>
          <div class="cta-row">
            <a class="btn" href="{{ bp('/bootcamp/') }}">View bootcamp details</a>
            <a class="btn ghost" href="{{ bp('/register/?course=' ~ (bootcamp.code if bootcamp.code is defined else 'bootcamp')) }}">Request a seat</a>
          </div>
        </div>
      {% else %}
        <div class="card learning-card">
          <p class="empty-state">Bootcamp dates are being finalized. Let us know your availability and we will tailor a cohort.</p>
          <div class="cta-row">
            <a class="btn" href="{{ bp('/bootcamp/') }}">Learn more</a>
            <a class="btn ghost" href="{{ bp('/contact/') }}">Talk with us</a>
          </div>
        </div>
      {% endif %}
    </div>
  </section>
{% endblock %}
